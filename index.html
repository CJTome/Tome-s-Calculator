<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /> <!-- Set character encoding -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/> <!-- Make site responsive -->
  <title>Modern Calculator</title> <!-- Page title -->
  <script src="https://cdn.tailwindcss.com"></script> <!-- Load TailwindCSS for styling -->
  <style>
    /* Import Inter font */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap');

    /* Page background and font setup */
    body {
      font-family: 'Inter', sans-serif;
      background-color: #1a1a1a;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 1rem;
    }

    /* Calculator container styling */
    .calculator {
      background-color: #2c2c2c;
      padding: 1.5rem;
      border-radius: 1.5rem;
      box-shadow: 0 20px 25px -5px rgba(0,0,0,0.5),
                  0 10px 10px -5px rgba(0,0,0,0.4);
      width: 100%;
      max-width: 400px;
    }

    /* Display styling */
    .display {
      background-color: #3b3b3b;
      color: #fff;
      text-align: right;
      padding: 1.5rem;
      border-radius: 0.75rem;
      margin-bottom: 1.5rem;
      font-size: 2.5rem;
      font-weight: 500;
      overflow-x: auto;
      white-space: nowrap;
    }

    /* Button base style */
    .btn {
      background-color: #4b4b4b;
      color: #fff;
      padding: 1.25rem;
      font-size: 1.5rem;
      font-weight: 500;
      border: none;
      border-radius: 1rem;
      cursor: pointer;
      transition: background-color 0.2s ease, transform 0.1s ease;
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.3);
    }

    /* Hover effect */
    .btn:hover {
      background-color: #5a5a5a;
      transform: translateY(-2px);
    }

    /* Active effect */
    .btn:active,
    .btn.active { /* Active class for keyboard feedback */
      transform: translateY(0);
      box-shadow: none;
      background-color: #6b6b6b !important;
    }

    /* Operator buttons */
    .btn.operator {
      background-color: #3b82f6;
    }
    .btn.operator:hover {
      background-color: #2563eb;
    }

    /* Equals button */
    .btn.equals {
      background-color: #10b981;
      grid-row: span 2;
      font-size: 1.75rem;
    }
    .btn.equals:hover {
      background-color: #059669;
    }

    /* Clear button */
    .btn.clear {
      background-color: #ef4444;
      grid-column: span 2;
      font-size: 1.25rem;
    }
    .btn.clear:hover {
      background-color: #dc2626;
    }

    /* Zero button spans two columns */
    .btn.zero {
      grid-column: span 2;
    }
  </style>
</head>
<body>
  <div class="calculator"> <!-- Calculator wrapper -->

    <!-- Display Screen -->
    <div class="display" id="display">0</div>

    <!-- Buttons Layout -->
    <div class="grid grid-cols-4 gap-4">
      <button class="btn clear">AC</button> <!-- All Clear -->
      <button class="btn delete">DEL</button> <!-- Delete last digit -->
      <button class="btn operator">/</button> <!-- Division -->
      <button class="btn operator">*</button> <!-- Multiplication -->

      <button class="btn">7</button> <!-- Number 7 -->
      <button class="btn">8</button> <!-- Number 8 -->
      <button class="btn">9</button> <!-- Number 9 -->
      <button class="btn operator">-</button> <!-- Subtraction -->

      <button class="btn">4</button> <!-- Number 4 -->
      <button class="btn">5</button> <!-- Number 5 -->
      <button class="btn">6</button> <!-- Number 6 -->
      <button class="btn operator">+</button> <!-- Addition -->

      <button class="btn">1</button> <!-- Number 1 -->
      <button class="btn">2</button> <!-- Number 2 -->
      <button class="btn">3</button> <!-- Number 3 -->
      <button class="btn equals row-span-2">=</button> <!-- Equals button spanning 2 rows -->

      <button class="btn zero">0</button> <!-- Number 0 spanning 2 columns -->
      <button class="btn">.</button> <!-- Decimal point -->
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const display = document.getElementById('display'); // Get display element
      let currentInput = ''; // Current typed number
      let firstOperand = null; // First number
      let operator = null; // Current operator
      let waitingForSecondOperand = false; // Flag to wait for second number

      // Update the calculator screen
      const updateDisplay = () => {
        display.textContent = currentInput || '0';
      };

      // Handle number input
      const handleNumber = (number) => {
        if (waitingForSecondOperand) {
          currentInput = number;
          waitingForSecondOperand = false;
        } else {
          currentInput = currentInput === '0' ? number : currentInput + number;
        }
        updateDisplay();
      };

      // Handle decimal input
      const handleDecimal = () => {
        if (!currentInput.includes('.')) {
          currentInput += '.';
        }
        updateDisplay();
      };

      // Handle operator input
      const handleOperator = (nextOperator) => {
        const inputValue = parseFloat(currentInput);
        if (operator && waitingForSecondOperand) {
          operator = nextOperator;
          return;
        }
        if (firstOperand === null) {
          firstOperand = inputValue;
        } else if (operator) {
          const result = performCalculation[operator](firstOperand, inputValue);
          currentInput = String(result);
          firstOperand = result;
        }
        waitingForSecondOperand = true;
        operator = nextOperator;
        updateDisplay();
      };

      // Math operations
      const performCalculation = {
        '/': (a, b) => a / b,
        '*': (a, b) => a * b,
        '+': (a, b) => a + b,
        '-': (a, b) => a - b,
        '=': (a, b) => b,
      };

      // Reset calculator
      const resetCalculator = () => {
        currentInput = '';
        firstOperand = null;
        operator = null;
        waitingForSecondOperand = false;
        updateDisplay();
      };

      // Delete last digit
      const deleteLast = () => {
        currentInput = currentInput.slice(0, -1) || '';
        updateDisplay();
      };

      // Handle button clicks
      const handleButtonClick = (event) => {
        if (!event.target.classList.contains('btn')) return;
        const { textContent, classList } = event.target;

        if (classList.contains('clear')) {
          resetCalculator();
        } else if (classList.contains('delete')) {
          deleteLast();
        } else if (textContent === '.') {
          handleDecimal();
        } else if (classList.contains('operator') || textContent === '=') {
          handleOperator(textContent);
        } else if (!isNaN(parseFloat(textContent))) {
          handleNumber(textContent);
        }
      };

      // Attach click events
      document.querySelector('.calculator').addEventListener('click', handleButtonClick);

      // Keyboard support
      document.addEventListener('keydown', (e) => {
        let key = e.key;
        if (key === 'Enter') key = '='; // Map Enter to "="

        if (!isNaN(key)) { // Number keys
          handleNumber(key);
          highlightButton(key);
        } else if (['+', '-', '*', '/'].includes(key)) { // Operator keys
          handleOperator(key);
          highlightButton(key);
        } else if (key === '.') { // Decimal
          handleDecimal();
          highlightButton('.');
        } else if (key === '=') { // Equals
          handleOperator('=');
          highlightButton('=');
        } else if (key === 'Escape') { // Clear
          resetCalculator();
          highlightButton('AC');
        } else if (key === 'Backspace') { // Delete
          deleteLast();
          highlightButton('DEL');
        }
      });

      // Highlight button for keyboard feedback
      const highlightButton = (value) => {
        const buttons = document.querySelectorAll('.btn');
        buttons.forEach((btn) => {
          if (btn.textContent === value) {
            btn.classList.add('active');
            setTimeout(() => btn.classList.remove('active'), 150);
          }
        });
      };

      // Initialize calculator
      resetCalculator();
    });
  </script>
</body>
</html>
